<!-- node.html -->
<div 
  #nodeContainer
  class="node-container" 
  [style.background-color]="node.color"
  [style.color]="node.color"
  
  (mousedown)="onMouseDown($event)"
  [style.position]="'absolute'"
  [style.left.px]="node.x"
  [style.top.px]="node.y"
  [style.width.px]="node.width"
  [style.height.px]="node.height"

  >
  
  <input 
    type="text" 
    placeholder="Title"  
    class="node-title-input"
    [value]="title"
    (mousedown)="null"
    (blur)="updateTitle($event)">
  @if(!nodeMinimised)
  {
    <textarea 
      #textArea
      placeholder="Input your notes here"
      class="node-text-input" 
      (input)="updateTextArea($event)"></textarea>
  }
  @if(menuVisible)
  {
    <div 
      #menu
      [style.left.px]="menuX"
      [style.top.px]="menuY"
      class="context-menu">
        <ul>
          <li (click)="onMenuAction('newNode',$event)">New child node</li>
          <li>Set color:
            <input 
              #colorPicker  
              type="color"
              class="color-picker"
              (input)="onMenuAction('color',$event)"
              [value]="node.color || '#007bff'">
          </li>
          <li (click)="onMenuAction('MinMaximiseNode',$event)">{{ nodeMinimised ? 'Maximise' : 'Minimise' }}</li>
          <li (click)="onMenuAction('delete',$event)">Delete</li>
        </ul>
    </div>
  }
  <div #resizinghandle class="resizinghandle" ></div>

</div>
